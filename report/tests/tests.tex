\subsection{Overview}
The liaison system was verified utilizing automated testbenches. The testbenches uses VHDL assertions to notify the author if any
of the tests failed. In order to create a good and short but extensive testbench, we have built a collection of procedures that takes input, expected output
and expected system status after all input has been sent.

The test cases was divided into three blocks.
\begin{itemize}
\item The first test block consists of 8 tests that asserts the normal behaviour. It is done with some easy cases and a 2 cycle delay between inputs.

\item The second test block consists of 24 cases that at some point broke our logic.  tests where our design was likly to have flaws. During development, these tests were
triggered often, proving their value.

\item The third and last test block is a permutation of working state and all 4! fail states, each with all MCUs sending
all possible inputs (all MCUs sends the same value to keep the number of tests down to an affordable number). This block consists of 16 836 different test cases,
and cover almost any possible state. The states that are not covered are those where one of the MCUs fails in the middle of the transaction, which are covered in
the second block.
\end{itemize}

Since all permutations of fail states and all permutations of valid input within these states
were applied to the circuit during simulation, we are confident that the Liaison System is working correctly. We have also tested the circuit with a post-place and route
simulation verifying that the output is also correct with timing taken into account\footnote{The timing simulation was done with iSim from Xilinx, synthesised with XST. Both tools are part of the ISE Design Suite}.

\subsection{Conformance with requirements specification}
This section explain the conformance with each point in the system requirements specification.
\begin{enumerate}
\item{\textbf{The Liaison Interface}} \hfill\\
    Our implementation of the Liaison System follows the signaling interface given by the requirements\cite{task}.

\item{\textbf{Voting}} \hfill\\
    The Voting algorithm has been tested and confirmed to be working. This was done by enumerating all
    permutations of input and state, and then check the Voters result against expected output using
    VHDL assertions.

\item{\textbf{Error tagging}} \hfill\\
    The error tagging is not specified in the requirements, but is nessesary in our implementation to
    achieve correct System Status bits and correct Voting. The error tagging was tested with the same
    tests as the Voting algorithm and does conform with the expected behaviour.

\item{\textbf{System status}} \hfill\\
    The System Status is needed to tell the receiver about the wellness of the microcontrollers. Since
    there exists a direct mapping between the Error tagging and the System Status, this is also
    included in the same tests as Error tagging and Voting.

\item{\textbf{Error correcting code}} \hfill\\
    The Error correcting code is a specific part of the requirements\cite{task}. The module was tested by writing
    a testbench function that generates (15,11)-Hamming Code with SECDED from an 11-bit word. This
    procedure was added to the enumerated tests from the Voter-test such that for each input, the testbench
    would automatically expect a specific ECC. If the ECC from the function was not equal to the output
    of the Liaison, assertions were raised to the tester. Since the soft function agrees with the simulated
    hardware, we are certain that the ECC-module works as specified in the requirements. The ECC-generating
    software function can be found in \autoref{apx:ecc}.

\item{\textbf{Reset behaviour}} \hfill\\
    On reset, The Liaison is set back to inital state on next clock cycle. The reset is stricly synchronous,
    as stated in the requirements\cite{task}, and is thus only read on rising edge of the clock. We have
    tested that reset works for any final state when a data sequence finished, but we have not tested the
    behavoiur of a reset in the middle of a transmission. By simple code inspection, we see that the
    reset is not aware of current system status, but simply sets all the state variables back to initial
    state. That means that after a reset signal is asserted along with rising edge of the clock, the system
    will not process data until a new {\ttfamily di\_ready}.

\item{\textbf{System consitency}} \hfill\\
    Taken into account all the tests ran on the Voter, ECC and Status modules, we are sure that the system works consistent
    with the requirements. Nearly all enumerations of internal state has been verified. We assume that those states that has
    not been explicitly tested work correctly, as their internals don't differ very much. Examples of this are wherever the MCUs
    fail at first bit or another bit within the word. We test only for first-bit failures in the exhaustive test, but both the
    voter and the \todo{write ecc status stuff}

\item{\textbf{New data after $11+m$ cycles}} \hfill\\
    Most of the test cases send data directly after previous data word was correctly received, so 
    Our implementation of the Liaison System follows the signaling interface given by the requirements.

\end{enumerate}
